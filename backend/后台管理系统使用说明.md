# 后台管理系统使用说明

## 功能概述

我已经为您创建了一个完整的后台管理系统，可以进行用户的创建、查看、编辑和删除操作。

## 启动步骤

1. **运行数据库迁移**（如果还没有运行过）：
```bash
cd backend
python manage.py makemigrations
python manage.py migrate
```

2. **启动 Django 服务器**：
```bash
python manage.py runserver
```

3. **访问后台管理系统**：
打开浏览器访问: `http://localhost:8000/user/admin/`

## 功能特性

### 1. 用户管理首页 (`/user/admin/`)
- 显示所有用户列表
- 用户搜索功能
- 分页显示（每页10条）
- 用户统计信息
- 快速操作按钮（查看、编辑、删除）

### 2. 创建用户 (`/user/admin/user/create/`)
- 表单验证（用户名和密码必填）
- 用户名唯一性检查
- 密码自动加密存储
- 创建成功后返回用户列表

### 3. 编辑用户 (`/user/admin/user/{id}/edit/`)
- 预填充现有用户信息
- 用户名修改（需检查唯一性）
- 密码可选修改（留空则不修改）
- 保存后跳转到用户列表

### 4. 用户详情 (`/user/admin/user/{id}/`)
- 显示用户完整信息
- 提供编辑和删除快捷按钮

### 5. 删除用户
- AJAX 异步删除
- 删除前确认提示
- 删除成功后自动刷新页面

## 界面特点

- **响应式设计**：适配不同屏幕尺寸
- **现代化UI**：简洁美观的界面设计
- **用户友好**：清晰的操作提示和错误信息
- **安全性**：CSRF 保护，密码加密存储

## API 接口保持不变

原有的 REST API 接口仍然可用：
- `POST /user/login/` - 用户登录
- `POST /user/register/` - 用户注册

## 文件结构

```
backend/
├── user/
│   ├── admin_views.py          # 后台管理视图
│   ├── views.py                # API 视图
│   ├── urls.py                 # 路由配置
│   └── ...
├── templates/
│   └── admin/
│       ├── base.html           # 基础模板
│       ├── dashboard.html      # 用户管理首页
│       ├── user_create.html    # 创建用户页面
│       ├── user_edit.html      # 编辑用户页面
│       └── user_detail.html    # 用户详情页面
└── ...
```

## 注意事项

1. **权限控制**：当前版本没有实现登录认证，所有人都可以访问后台。如需要认证，可以添加 `@login_required` 装饰器。

2. **CSRF 保护**：删除操作使用了 CSRF 保护，确保安全性。

3. **数据验证**：所有表单都有前端和后端双重验证。

4. **错误处理**：完善的错误提示和异常处理机制。

## 使用示例

1. 访问 `http://localhost:8000/user/admin/` 查看用户列表
2. 点击"创建新用户"按钮添加用户
3. 使用搜索框快速找到特定用户
4. 点击"编辑"按钮修改用户信息
5. 点击"删除"按钮删除用户（需确认）

这个后台管理系统完全独立于原有的 API 系统，不会影响前端的正常对接。
